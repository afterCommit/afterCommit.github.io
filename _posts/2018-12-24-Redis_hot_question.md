---
layout:     post                    # 使用的布局（不需要改）
title:      Redis常考问题               # 标题
subtitle:   新生儿的第一句话,Hello World #副标题
date:       2018-12-24              # 时间
author:     Zen                      # 作者
header-img: img/post-bg-2015.jpg    #这篇文章标题背景图片
catalog: False                       # 是否归档
tags:                               #标签
    - Redis
---

1. Redis的两种持久化操作以及如何保障数据安全
RDB持久性以指定的时间间隔执行数据集的时间点快照。整体备份
AOF持久性记录服务器接收的每个写入操作，将在服务器启动时再次播放，重建原始数据集。使用与Redis协议本身相同的格式以仅追加方式记录命令。当Redis太大时，Redis能够在后台重写日志。单操作备份
如果您愿意，只要服务器正在运行，您就可以根据需要禁用持久性。可以动态禁用持久性
可以在同一实例中组合AOF和RDB。请注意，在这种情况下，当Redis重新启动时，AOF文件将用于重建原始数据集，因为它保证是最完整的。官方推荐AOF+RDB是最好的
2. Redis如何实现数据分片
客户端分区意味着客户端直接选择正确的节点在哪里写或读取给定的key。许多Redis客户端实现客户端分区。知道自己去哪
代理辅助分区意味着我们的客户端向能够说Redis协议的代理发送请求，而不是直接向正确的Redis实例发送请求。代理将确保将我们的请求相应地转发到正确的Redis实例到已配置的分区模式，并将回复发送回客户端。Redis和Memcached代理Twemproxy实现代理辅助分区。询问代理自己该去哪
查询路由意味着您可以将查询发送到随机实例，并且实例将确保将查询转发到正确的节点。Redis Cluster在客户端的帮助下实现了一种混合形式的查询路由（请求不是直接从Redis实例转发到另一个实例，而是将客户端重定向到正确的节点）。发给你之后带我去哪我去哪
3. Redis的主从复制策略是怎样的
当主实例和从属实例连接良好时，主设备通过向从设备发送命令流来保持从设备更新，以便复制对主设备端发生的数据集的影响，原因是：客户端写入，key已过期或驱逐，更改主数据集的任何其他操作。
当主设备和从设备之间的链路中断时，对于网络问题或者由于主设备或从设备中检测到超时，从设备重新连接并尝试继续部分重新同步：这意味着它将尝试仅获取部件它在断开连接时错过的命令流。
当无法进行部分重新同步时，从站将要求完全重新同步。这将涉及一个更复杂的过程，其中主机需要创建其所有数据的快照，将其发送到从机，然后在数据集更改时继续发送命令流。
Redis默认使用异步复制，即低延迟和高性能，是绝大多数Redis用例的自然复制模式。但是，Redis从站异步确认它们与主站定期收到的数据量。因此主设备不会每次等待从设备处理命令，但是如果需要，它知道哪个从设备已经处理了什么命令。这允许具有可选的同步复制。
4. 	Redis是如何使用Redis Sentinel来保证高可用的
监控。Sentinel会不断检查主实例和从属实例是否按预期工作。
通知。Sentinel可以通过API通知系统管理员，另一台计算机程序，其中一个受监控的Redis实例出现问题。
自动故障转移。如果主服务器未按预期工作，Sentinel可以启动故障转移过程，其中从服务器被提升为主服务器，其他其他服务器将重新配置为使用新主服务器，并且使用Redis服务器的应用程序会通知有关新服务器的地址。连接。
配置提供商。Sentinel充当客户端服务发现的权限来源：客户端连接到Sentinels，以便询问负责给定服务的当前Redis主服务器的地址。如果发生故障转移，Sentinels将报告新地址。
